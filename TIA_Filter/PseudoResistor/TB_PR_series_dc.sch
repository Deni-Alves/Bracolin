v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
B 2 1240 -530 2040 -130 {flags=graph


ypos1=0
ypos2=2


unity=f




xlabmag=1.0
ylabmag=1.0



unitx=m
logx=0
logy=0

color=4
node=idiff




hilight_wave=-1




divx=10




rainbow=1
linewidth_mult=4.0
divy=10
subdivx=5
subdivy=1





x1=-0.2
x2=0.196
y1=-6.1e-13
y2=6e-13
dataset=-1}
B 2 1240 -130 2040 270 {flags=graph


ypos1=0
ypos2=2

subdivy=1
unity=T



subdivx=1
xlabmag=1.0
ylabmag=1.0



unitx=m
logx=0
logy=0
color=5




node=rdiff
divx=10

linewidth_mult=4.0
divy=7












rainbow=1







dataset=-1



x1=-0.055
x2=0.055


y1=0.4T
y2=1.8T}
B 2 1240 280 2040 680 {flags=graph


ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1


divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0



unitx=1
logx=0
logy=0




y2=1.9
x1=-0.2
x2=0.196
y1=1.4
color="4 5"
node="vxb
vxa"
rainbow=1
dataset=0}
T {DC operation a single 
Pseudo-Resistor ~185Gohm
Work Range -20m to 20m with VCM =1.65V} 1440 -620 0 0 0.4 0.4 { layer=3}
N 180 10 180 30 {
lab=#net1}
N 180 -80 180 -50 {
lab=VDD}
N 120 70 150 70 {
lab=VDD}
N 200 420 230 420 {
lab=GND}
N 120 130 150 130 {
lab=GND}
N 210 -230 230 -230 {
lab=VDD}
N 780 -250 800 -250 {
lab=VA}
N 780 -250 780 -230 {
lab=VA}
N 780 -170 780 -150 {
lab=VA__i}
N 760 450 780 450 {
lab=VB}
N 780 330 780 360 {
lab=VB__i}
N 780 420 780 450 {
lab=VB}
N 830 200 850 200 {
lab=GND}
N 830 -40 850 -40 {
lab=VDD}
N 260 170 260 190 {
lab=#net2}
N 260 250 260 330 {
lab=#net3}
N 260 -0 260 30 {
lab=#net4}
N 260 -140 260 -60 {
lab=#net5}
N 260 330 270 330 {
lab=#net3}
N 310 -120 730 -120 {
lab=#net6}
N 330 -80 730 -80 {
lab=#net7}
N 370 -30 730 -30 {
lab=#net8}
N 370 -30 370 330 {
lab=#net8}
N 430 60 730 60 {
lab=#net9}
N 430 60 430 330 {
lab=#net9}
N 450 100 450 330 {
lab=#net10}
N 450 100 730 100 {
lab=#net10}
N 490 150 730 150 {
lab=#net11}
N 490 150 490 330 {
lab=#net11}
N 510 190 730 190 {
lab=#net12}
N 510 190 510 330 {
lab=#net12}
N 550 240 550 330 {
lab=#net13}
N 550 240 730 240 {
lab=#net13}
N 570 280 730 280 {
lab=#net14}
N 570 280 570 330 {
lab=#net14}
N 390 10 730 10 {
lab=#net15}
N 390 10 390 40 {
lab=#net15}
N 390 40 390 330 {
lab=#net15}
N 300 -100 730 -100 {
lab=#net16}
N 300 -140 300 -100 {
lab=#net16}
N 320 -60 730 -60 {
lab=#net17}
N 320 -140 320 -60 {
lab=#net17}
N 360 -10 730 -10 {
lab=#net18}
N 360 -140 360 -10 {
lab=#net18}
N 380 30 730 30 {
lab=#net19}
N 380 -140 380 30 {
lab=#net19}
N 420 80 730 80 {
lab=#net20}
N 420 -140 420 80 {
lab=#net20}
N 440 120 730 120 {
lab=#net21}
N 440 -140 440 120 {
lab=#net21}
N 480 170 730 170 {
lab=#net22}
N 480 -140 480 170 {
lab=#net22}
N 500 210 730 210 {
lab=#net23}
N 500 -140 500 210 {
lab=#net23}
N 540 260 730 260 {
lab=#net24}
N 540 -140 540 260 {
lab=#net24}
N 560 300 730 300 {
lab=#net25}
N 560 -140 560 300 {
lab=#net25}
N 150 270 150 290 {
lab=GND}
N 150 170 150 210 {
lab=#net26}
N 150 170 230 170 {
lab=#net26}
N 110 -180 220 -180 {
lab=#net27}
N 220 -180 230 -180 {
lab=#net27}
N 230 -180 230 30 {
lab=#net27}
N 110 -120 110 -100 {
lab=GND}
N 230 420 240 420 {
lab=GND}
N -900 -115 -900 -95 {
lab=VDD}
N -900 -115 -870 -115 {
lab=VDD}
N -900 -35 -900 -15 {
lab=GND}
N -520 -205 -520 -185 {
lab=Vxb}
N -730 -115 -730 -105 {
lab=Vxa}
N -760 -105 -710 -105 {
lab=Vxa}
N -650 -105 -610 -105 {
lab=#net28}
N -630 -105 -630 -35 {
lab=#net28}
N -630 -35 -630 -5 {
lab=#net28}
N -630 -5 -600 -5 {
lab=#net28}
N -540 -5 -520 -5 {
lab=#net29}
N -520 -185 -520 -125 {
lab=Vxb}
N -520 -125 -520 -95 {
lab=Vxb}
N -520 -35 -520 -5 {
lab=#net29}
N -760 15 -760 35 {
lab=GND}
N -660 165 -630 165 {
lab=VA}
N -660 165 -660 225 {
lab=VA}
N -660 225 -540 225 {
lab=VA}
N -540 145 -540 225 {
lab=VA}
N -710 125 -630 125 {
lab=Vxa}
N -710 115 -710 125 {
lab=Vxa}
N -920 165 -890 165 {
lab=VB}
N -920 165 -920 225 {
lab=VB}
N -920 225 -800 225 {
lab=VB}
N -800 145 -800 225 {
lab=VB}
N -970 125 -890 125 {
lab=Vxb}
N -970 115 -970 125 {
lab=Vxb}
N -800 145 -750 145 {
lab=VB}
N -540 145 -490 145 {
lab=VA}
N -610 -165 -610 -145 {
lab=GND}
N 310 -120 310 260 {
lab=#net6}
N 310 320 310 330 {
lab=#net30}
N 330 -80 330 260 {
lab=#net7}
N 330 320 330 330 {
lab=#net31}
N 610 330 690 330 {
lab=GND}
N 600 -140 650 -140 {
lab=VDD}
C {devices/code_shown.sym} -660 -530 0 0 {name=MODELS only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
*.param sw_stat_mismatch=1
*.param sw_stat_global=1
"}
C {devices/code_shown.sym} -410 -290 0 0 {name=NGSPICE only_toplevel=true
value="
*.OPTION ABSTOL=1e-2
.option gmin=1e-15
.option RSHUNT=1e35

*.nodeset v(Vin_neg)=1.65
*.nodeset v(vout)=1.65

*.nodeset all=1.65

.param ibias = 960p
*.param it_amp = 2p

.control
save all

op
remzerovec 
write TB_PR_series_dc.raw
set appendwrite

dc VX -200m 200m 6m

let idiff = i(vai)-i(vbi)
let Rdiff = 4/deriv(idiff)

save idiff Rdiff
remzerovec
write TB_PR_series_dc.raw

.endc
"
}
C {devices/launcher.sym} 875 -435 0 0 {name=h1
descr="Load/unload waveforms in graph."
tclcommand="
xschem raw_read $netlist_dir/[file tail [file rootname [xschem get current_name]]].raw dc
"
}
C {devices/launcher.sym} 880 -390 0 0 {name=h2
descr="Annotate OP" 
tclcommand="set show_hidden_texts 1; xschem annotate_op"
}
C {devices/code_shown.sym} -390 350 0 0 {name=NGSPICE1 only_toplevel=true
value="
*.option savecurrents
.option gmin=1e-32
.option RSHUNT=1e35
*.option RELTOL=1e-9
*.OPTION ABSTOL=1e-14
*.option vntol = 1e-9

.param ibias = 1p
.param it_amp = 2p

.control

let sample_index = -54


while sample_index < 136
 reset
 set temp = $&sample_index
 dc VX -200m 200m 6m

 let idiff = i(vai)-i(vbi)
 let Rdiff = 4/deriv(idiff)

 save idiff Rdiff
 remzerovec
 write TB_PR_single_dc.raw
 set appendwrite

 let sample_index = sample_index + 27
end

.endc
.save all
.save idiff Rdiff
"
spice_ignore=true}
C {CurrentMirrors/CM_n_net.sym} -20 680 0 0 {name=x9}
C {CurrentMirrors/CM_p_net.sym} 470 -100 0 0 {name=x10}
C {PseudoResistor/PRbiased_net_x5.sym} 740 80 1 0 {name=x11}
C {CurrentMirrors/CM_input.sym} 250 90 0 0 {name=x12}
C {devices/isource.sym} 180 -20 0 1 {name=I21 value=\{ibias\}}
C {devices/lab_wire.sym} 120 70 0 0 {name=p1 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 180 -80 0 1 {name=p2 sig_type=std_logic lab=VDD}
C {devices/gnd.sym} 200 420 0 1 {name=l22 lab=GND}
C {devices/gnd.sym} 120 130 0 1 {name=l23 lab=GND}
C {devices/lab_wire.sym} 210 -230 0 0 {name=p3 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 780 -250 0 1 {name=p4 sig_type=std_logic lab=VA
}
C {devices/lab_wire.sym} 780 -150 0 1 {name=p8 sig_type=std_logic lab=VA__i
}
C {devices/ammeter.sym} 780 -200 0 0 {name=Vai
}
C {devices/lab_wire.sym} 780 450 0 0 {name=p9 sig_type=std_logic lab=VB
}
C {devices/lab_wire.sym} 780 350 0 0 {name=p10 sig_type=std_logic lab=VB__i
}
C {devices/ammeter.sym} 780 390 2 1 {name=Vbi
}
C {devices/gnd.sym} 850 200 0 0 {name=l24 lab=GND}
C {devices/lab_wire.sym} 850 -40 0 1 {name=p11 sig_type=std_logic lab=VDD}
C {devices/ammeter.sym} 260 220 0 0 {name=Vinn
}
C {devices/ammeter.sym} 260 -30 0 0 {name=Vinp
}
C {devices/vsource.sym} 150 240 0 0 {name=Vcm3 value=0.3025}
C {devices/gnd.sym} 150 290 0 0 {name=l3 lab=GND}
C {devices/vsource.sym} 110 -150 0 0 {name=Vcm4 value=2.8391}
C {devices/gnd.sym} 110 -100 0 0 {name=l4 lab=GND}
C {devices/vsource.sym} -900 -65 0 0 {name=VDD value=3.3}
C {devices/gnd.sym} -900 -15 0 0 {name=l9 lab=GND}
C {devices/lab_wire.sym} -870 -115 0 1 {name=p18 sig_type=std_logic lab=VDD}
C {devices/vsource.sym} -760 -75 0 0 {name=VX value=0}
C {devices/gnd.sym} -570 -85 0 0 {name=l12 lab=GND}
C {devices/lab_wire.sym} -730 -115 0 0 {name=p21 sig_type=std_logic lab=Vxa

}
C {devices/lab_wire.sym} -520 -205 0 0 {name=p22 sig_type=std_logic lab=Vxb}
C {devices/vsource.sym} -520 -65 0 0 {name=VB1 value=3.3}
C {devices/gnd.sym} -760 35 0 0 {name=l11 lab=GND}
C {devices/gnd.sym} -610 -165 2 0 {name=l14 lab=GND}
C {devices/res.sym} -680 -105 1 0 {name=R1
value=100k
footprint=1206
device=resistor
m=1}
C {devices/res.sym} -570 -5 1 0 {name=R2
value=100k
footprint=1206
device=resistor
m=1}
C {devices/vsource.sym} -760 -15 0 0 {name=VB2 value=1.65}
C {devices/lab_wire.sym} -710 115 0 0 {name=p19 sig_type=std_logic lab=Vxa

}
C {devices/gnd.sym} -590 185 0 0 {name=l10 lab=GND}
C {devices/lab_wire.sym} -970 115 0 0 {name=p20 sig_type=std_logic lab=Vxb

}
C {devices/gnd.sym} -850 185 0 0 {name=l13 lab=GND}
C {devices/lab_wire.sym} -750 145 0 1 {name=p23 sig_type=std_logic lab=VB

}
C {devices/lab_wire.sym} -490 145 0 1 {name=p24 sig_type=std_logic lab=VA

}
C {auxLib/ampOp_ideal.sym} -930 175 0 0 {name=x2}
C {auxLib/ampOp_ideal.sym} -670 175 0 0 {name=x3}
C {auxLib/ampOp_ideal.sym} -650 -95 0 0 {name=x1}
C {devices/ammeter.sym} 310 290 0 1 {name=Vibn1
}
C {devices/ammeter.sym} 330 290 0 0 {name=Vitn1
}
C {devices/gnd.sym} 690 330 0 0 {name=l1 lab=GND}
C {devices/lab_wire.sym} 650 -140 0 1 {name=p5 sig_type=std_logic lab=VDD}
