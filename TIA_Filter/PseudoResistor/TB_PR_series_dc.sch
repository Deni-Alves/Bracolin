v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
B 2 1620 -570 2420 -170 {flags=graph


ypos1=0
ypos2=2


unity=f




xlabmag=1.0
ylabmag=1.0



unitx=m
logx=0
logy=0

color=4
node=idiff




hilight_wave=-1




divx=10




rainbow=1
linewidth_mult=4.0
divy=10
subdivx=5
subdivy=1





x1=-0.2
x2=0.196
y1=-6.1e-13
y2=6e-13
dataset=-1}
B 2 1620 -170 2420 230 {flags=graph


ypos1=0
ypos2=2

subdivy=1
unity=T



subdivx=1
xlabmag=1.0
ylabmag=1.0



unitx=m
logx=0
logy=0
color=5




node=rdiff
divx=10

linewidth_mult=4.0
divy=7












rainbow=1







dataset=-1



x1=-0.055
x2=0.055


y1=0.4T
y2=1.8T}
B 2 1620 240 2420 640 {flags=graph


ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1


divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0



unitx=1
logx=0
logy=0




y2=1.9
x1=-0.2
x2=0.196
y1=1.4
color="4 5"
node="vxb
vxa"
rainbow=1
dataset=0}
T {DC operation a single 
Pseudo-Resistor ~185Gohm
Work Range -20m to 20m with VCM =1.65V} 1820 -660 0 0 0.4 0.4 { layer=3}
N -900 -115 -900 -95 {
lab=VDD}
N -900 -115 -870 -115 {
lab=VDD}
N -900 -35 -900 -15 {
lab=GND}
N -520 -205 -520 -185 {
lab=Vxb}
N -730 -115 -730 -105 {
lab=Vxa}
N -760 -105 -710 -105 {
lab=Vxa}
N -650 -105 -610 -105 {
lab=#net1}
N -630 -105 -630 -35 {
lab=#net1}
N -630 -35 -630 -5 {
lab=#net1}
N -630 -5 -600 -5 {
lab=#net1}
N -540 -5 -520 -5 {
lab=#net2}
N -520 -185 -520 -125 {
lab=Vxb}
N -520 -125 -520 -95 {
lab=Vxb}
N -520 -35 -520 -5 {
lab=#net2}
N -760 15 -760 35 {
lab=GND}
N -660 165 -630 165 {
lab=VA}
N -660 165 -660 225 {
lab=VA}
N -660 225 -540 225 {
lab=VA}
N -540 145 -540 225 {
lab=VA}
N -710 125 -630 125 {
lab=Vxa}
N -710 115 -710 125 {
lab=Vxa}
N -920 165 -890 165 {
lab=VB}
N -920 165 -920 225 {
lab=VB}
N -920 225 -800 225 {
lab=VB}
N -800 145 -800 225 {
lab=VB}
N -970 125 -890 125 {
lab=Vxb}
N -970 115 -970 125 {
lab=Vxb}
N -800 145 -750 145 {
lab=VB}
N -540 145 -490 145 {
lab=VA}
N -610 -165 -610 -145 {
lab=GND}
N 790 110 790 130 {
lab=#net3}
N 790 190 790 270 {
lab=#net4}
N 790 -60 790 -30 {
lab=#net5}
N 790 -200 790 -120 {
lab=#net6}
N 790 270 800 270 {
lab=#net4}
N 840 -180 1260 -180 {
lab=#net7}
N 860 -140 1260 -140 {
lab=#net8}
N 900 -90 1260 -90 {
lab=#net9}
N 900 -90 900 270 {
lab=#net9}
N 960 0 1260 0 {
lab=#net10}
N 960 0 960 270 {
lab=#net10}
N 980 40 980 270 {
lab=#net11}
N 980 40 1260 40 {
lab=#net11}
N 1020 90 1260 90 {
lab=#net12}
N 1020 90 1020 270 {
lab=#net12}
N 1040 130 1260 130 {
lab=#net13}
N 1040 130 1040 270 {
lab=#net13}
N 1080 180 1080 270 {
lab=#net14}
N 1080 180 1260 180 {
lab=#net14}
N 1100 220 1260 220 {
lab=#net15}
N 1100 220 1100 270 {
lab=#net15}
N 920 -50 1260 -50 {
lab=#net16}
N 920 -20 920 270 {
lab=#net16}
N 830 -160 1260 -160 {
lab=#net17}
N 830 -200 830 -160 {
lab=#net17}
N 850 -120 1260 -120 {
lab=#net18}
N 850 -200 850 -120 {
lab=#net18}
N 890 -70 1260 -70 {
lab=#net19}
N 890 -200 890 -70 {
lab=#net19}
N 910 -30 1260 -30 {
lab=#net20}
N 910 -200 910 -30 {
lab=#net20}
N 950 20 1260 20 {
lab=#net21}
N 950 -200 950 20 {
lab=#net21}
N 970 60 1260 60 {
lab=#net22}
N 970 -200 970 60 {
lab=#net22}
N 1010 110 1260 110 {
lab=#net23}
N 1010 -200 1010 110 {
lab=#net23}
N 1030 150 1260 150 {
lab=#net24}
N 1030 -200 1030 150 {
lab=#net24}
N 1070 200 1260 200 {
lab=#net25}
N 1070 -200 1070 200 {
lab=#net25}
N 1090 240 1260 240 {
lab=#net26}
N 1090 -200 1090 240 {
lab=#net26}
N 840 -180 840 200 {
lab=#net7}
N 860 -140 860 200 {
lab=#net8}
N 1140 270 1220 270 {
lab=GND}
N 1130 -200 1180 -200 {
lab=VDD}
N 920 -50 920 -20 {
lab=#net16}
N 620 -200 760 -200 {
lab=#net27}
N 630 270 760 270 {
lab=#net28}
N 660 360 770 360 {
lab=GND}
N 650 -290 760 -290 {
lab=VDD}
N 230 270 290 270 {
lab=GND}
N 190 -140 570 -140 {
lab=#net29}
N 190 -90 530 -90 {
lab=#net30}
N 530 -90 530 270 {
lab=#net30}
N 510 -50 510 270 {
lab=#net31}
N 190 -50 510 -50 {
lab=#net31}
N 190 0 470 0 {
lab=#net32}
N 470 0 470 270 {
lab=#net32}
N 450 40 450 270 {
lab=#net33}
N 190 40 450 40 {
lab=#net33}
N 190 90 410 90 {
lab=#net34}
N 410 90 410 270 {
lab=#net34}
N 390 130 390 270 {
lab=#net35}
N 190 130 390 130 {
lab=#net35}
N 190 180 350 180 {
lab=#net36}
N 350 180 350 270 {
lab=#net36}
N 330 220 330 270 {
lab=#net37}
N 190 220 330 220 {
lab=#net37}
N 580 -200 580 -160 {
lab=#net38}
N 190 -160 580 -160 {
lab=#net38}
N 190 -120 560 -120 {
lab=#net39}
N 560 -200 560 -120 {
lab=#net39}
N 190 -70 520 -70 {
lab=#net40}
N 520 -200 520 -70 {
lab=#net40}
N 190 -30 500 -30 {
lab=#net41}
N 500 -200 500 -30 {
lab=#net41}
N 190 20 460 20 {
lab=#net42}
N 460 -200 460 20 {
lab=#net42}
N 440 -200 440 60 {
lab=#net43}
N 190 60 440 60 {
lab=#net43}
N 400 -200 400 110 {
lab=#net44}
N 190 110 400 110 {
lab=#net44}
N 380 -200 380 150 {
lab=#net45}
N 190 150 380 150 {
lab=#net45}
N 340 -200 340 200 {
lab=#net46}
N 190 200 340 200 {
lab=#net46}
N 320 -200 320 240 {
lab=#net47}
N 190 240 320 240 {
lab=#net47}
N 710 -70 710 -30 {
lab=#net48}
N 660 10 680 10 {
lab=VDD}
N 660 70 680 70 {
lab=GND}
N 230 -200 280 -200 {
lab=VDD}
N 1360 -100 1380 -100 {
lab=VDD}
N 60 -100 90 -100 {
lab=VDD}
N 60 140 90 140 {
lab=GND}
N 1360 140 1390 140 {
lab=GND}
N 710 -150 710 -130 {
lab=VDD}
N 760 -200 760 -100 {
lab=#net27}
N 760 -40 760 -30 {
lab=#net49}
N 660 -70 710 -70 {
lab=#net48}
N 660 -130 710 -130 {
lab=VDD}
N 760 110 760 130 {
lab=#net50}
N 760 190 760 270 {
lab=#net28}
N 1310 -310 1330 -310 {
lab=VA}
N 1310 -310 1310 -290 {
lab=VA}
N 1310 -230 1310 -210 {
lab=VA__i}
N 1290 390 1310 390 {
lab=VB}
N 1310 270 1310 300 {
lab=VB__i}
N 1310 360 1310 390 {
lab=VB}
N 120 390 140 390 {
lab=VB2}
N 140 270 140 300 {
lab=VB2__i}
N 140 360 140 390 {
lab=VB2}
N 140 -310 160 -310 {
lab=VA2}
N 140 -310 140 -290 {
lab=VA2}
N 140 -230 140 -210 {
lab=VA2__i}
N -660 335 -630 335 {
lab=VA2}
N -660 335 -660 395 {
lab=VA2}
N -660 395 -540 395 {
lab=VA2}
N -540 315 -540 395 {
lab=VA2}
N -710 295 -630 295 {
lab=Vxa}
N -710 285 -710 295 {
lab=Vxa}
N -920 335 -890 335 {
lab=VB2}
N -920 335 -920 395 {
lab=VB2}
N -920 395 -800 395 {
lab=VB2}
N -800 315 -800 395 {
lab=VB2}
N -970 295 -890 295 {
lab=Vxb}
N -970 285 -970 295 {
lab=Vxb}
N -800 315 -750 315 {
lab=VB2}
N -540 315 -490 315 {
lab=VA2}
N 190 -180 590 -180 {
lab=#net51}
N 860 260 860 270 {
lab=#net52}
N 840 260 840 270 {
lab=#net53}
N 570 -140 570 190 {
lab=#net29}
N 570 250 570 270 {
lab=#net54}
N 590 -180 590 190 {
lab=#net51}
N 590 250 590 270 {
lab=#net55}
C {devices/code_shown.sym} -660 -530 0 0 {name=MODELS only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
*.param sw_stat_mismatch=1
*.param sw_stat_global=1
"}
C {devices/code_shown.sym} -410 -290 0 0 {name=NGSPICE only_toplevel=true
value="
*.OPTION ABSTOL=1e-2
.option gmin=1e-15
.option RSHUNT=1e35

*.nodeset v(Vin_neg)=1.65
*.nodeset v(vout)=1.65

*.nodeset all=1.65

.param ibias = 1n
*.param it_amp = 2p

.control
save all

op
remzerovec 
write TB_PR_series_dc.raw
set appendwrite

dc VX -200m 200m 6m

let idiff = i(vai)-i(vbi)
let Rdiff = 4/deriv(idiff)

save idiff Rdiff
remzerovec
write TB_PR_series_dc.raw

.endc
"
}
C {devices/launcher.sym} 1255 -475 0 0 {name=h1
descr="Load/unload waveforms in graph."
tclcommand="
xschem raw_read $netlist_dir/[file tail [file rootname [xschem get current_name]]].raw dc
"
}
C {devices/launcher.sym} 1260 -430 0 0 {name=h2
descr="Annotate OP" 
tclcommand="set show_hidden_texts 1; xschem annotate_op"
}
C {devices/code_shown.sym} -390 350 0 0 {name=NGSPICE1 only_toplevel=true
value="
*.option savecurrents
.option gmin=1e-32
.option RSHUNT=1e35
*.option RELTOL=1e-9
*.OPTION ABSTOL=1e-14
*.option vntol = 1e-9

.param ibias = 1p
.param it_amp = 2p

.control

let sample_index = -54


while sample_index < 136
 reset
 set temp = $&sample_index
 dc VX -200m 200m 6m

 let idiff = i(vai)-i(vbi)
 let Rdiff = 4/deriv(idiff)

 save idiff Rdiff
 remzerovec
 write TB_PR_single_dc.raw
 set appendwrite

 let sample_index = sample_index + 27
end

.endc
.save all
.save idiff Rdiff
"
spice_ignore=true}
C {devices/vsource.sym} -900 -65 0 0 {name=VDD value=3.3}
C {devices/gnd.sym} -900 -15 0 0 {name=l9 lab=GND}
C {devices/lab_wire.sym} -870 -115 0 1 {name=p18 sig_type=std_logic lab=VDD}
C {devices/vsource.sym} -760 -75 0 0 {name=VX value=0}
C {devices/gnd.sym} -570 -85 0 0 {name=l12 lab=GND}
C {devices/lab_wire.sym} -730 -115 0 0 {name=p21 sig_type=std_logic lab=Vxa

}
C {devices/lab_wire.sym} -520 -205 0 0 {name=p22 sig_type=std_logic lab=Vxb}
C {devices/vsource.sym} -520 -65 0 0 {name=VB1 value=3.3}
C {devices/gnd.sym} -760 35 0 0 {name=l11 lab=GND}
C {devices/gnd.sym} -610 -165 2 0 {name=l14 lab=GND}
C {devices/res.sym} -680 -105 1 0 {name=R1
value=100k
footprint=1206
device=resistor
m=1}
C {devices/res.sym} -570 -5 1 0 {name=R2
value=100k
footprint=1206
device=resistor
m=1}
C {devices/vsource.sym} -760 -15 0 0 {name=VB2 value=1.65}
C {devices/lab_wire.sym} -710 115 0 0 {name=p19 sig_type=std_logic lab=Vxa

}
C {devices/gnd.sym} -590 185 0 0 {name=l10 lab=GND}
C {devices/lab_wire.sym} -970 115 0 0 {name=p20 sig_type=std_logic lab=Vxb

}
C {devices/gnd.sym} -850 185 0 0 {name=l13 lab=GND}
C {devices/lab_wire.sym} -750 145 0 1 {name=p23 sig_type=std_logic lab=VB

}
C {devices/lab_wire.sym} -490 145 0 1 {name=p24 sig_type=std_logic lab=VA

}
C {auxLib/ampOp_ideal.sym} -930 175 0 0 {name=x2}
C {auxLib/ampOp_ideal.sym} -670 175 0 0 {name=x3}
C {auxLib/ampOp_ideal.sym} -650 -95 0 0 {name=x1}
C {CurrentMirrors/CM_n_net.sym} 510 620 0 0 {name=x9}
C {CurrentMirrors/CM_p_net.sym} 1000 -160 0 0 {name=x10}
C {PseudoResistor/PRbiased_net_x5.sym} 1270 20 1 0 {name=x11}
C {CurrentMirrors/CM_input.sym} 780 30 0 0 {name=x12}
C {CurrentMirrors/CM_p_net.sym} 410 -160 0 1 {name=x4}
C {CurrentMirrors/CM_n_net.sym} 920 620 0 1 {name=x5}
C {PseudoResistor/PRbiased_net_x5.sym} 180 20 3 1 {name=x6}
C {devices/lab_wire.sym} 720 -290 0 0 {name=p10 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 670 10 0 0 {name=p11 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 1380 -100 0 1 {name=p12 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 60 -100 0 0 {name=p13 sig_type=std_logic lab=VDD}
C {devices/lab_wire.sym} 230 -200 0 0 {name=p1 sig_type=std_logic lab=VDD}
C {devices/isource.sym} 660 -100 0 1 {name=I21 value=\{ibias\}}
C {devices/ammeter.sym} 790 160 0 0 {name=Vinn
}
C {devices/lab_wire.sym} 710 -150 0 0 {name=p3 sig_type=std_logic lab=VDD}
C {devices/ammeter.sym} 760 -70 0 1 {name=Vinp1
}
C {devices/ammeter.sym} 790 -90 0 0 {name=Vinp2
}
C {devices/ammeter.sym} 760 160 0 1 {name=Vinn1
}
C {devices/lab_wire.sym} 1310 -310 0 1 {name=p4 sig_type=std_logic lab=VA
}
C {devices/lab_wire.sym} 1310 -210 0 1 {name=p8 sig_type=std_logic lab=VA__i
}
C {devices/ammeter.sym} 1310 -260 0 0 {name=Vai
}
C {devices/lab_wire.sym} 1310 390 0 0 {name=p9 sig_type=std_logic lab=VB
}
C {devices/lab_wire.sym} 1310 290 0 0 {name=p5 sig_type=std_logic lab=VB__i
}
C {devices/ammeter.sym} 1310 330 2 1 {name=Vbi
}
C {devices/lab_wire.sym} 140 390 0 0 {name=p6 sig_type=std_logic lab=VB2
}
C {devices/lab_wire.sym} 140 290 0 0 {name=p7 sig_type=std_logic lab=VB2__i
}
C {devices/ammeter.sym} 140 330 2 1 {name=Vbi2
}
C {devices/lab_wire.sym} 140 -310 0 1 {name=p25 sig_type=std_logic lab=VA2
}
C {devices/lab_wire.sym} 140 -210 0 1 {name=p26 sig_type=std_logic lab=VA2__i
}
C {devices/ammeter.sym} 140 -260 0 0 {name=Vai2
}
C {devices/lab_wire.sym} -710 285 0 0 {name=p27 sig_type=std_logic lab=Vxa

}
C {devices/gnd.sym} -590 355 0 0 {name=l1 lab=GND}
C {devices/lab_wire.sym} -970 285 0 0 {name=p28 sig_type=std_logic lab=Vxb

}
C {devices/gnd.sym} -850 355 0 0 {name=l2 lab=GND}
C {devices/lab_wire.sym} -750 315 0 1 {name=p29 sig_type=std_logic lab=VB2

}
C {devices/lab_wire.sym} -490 315 0 1 {name=p30 sig_type=std_logic lab=VA2

}
C {auxLib/ampOp_ideal.sym} -930 345 0 0 {name=x7}
C {auxLib/ampOp_ideal.sym} -670 345 0 0 {name=x8}
C {devices/lab_wire.sym} 1170 -200 0 1 {name=p31 sig_type=std_logic lab=VDD}
C {devices/gnd.sym} 60 140 0 1 {name=l3 lab=GND}
C {devices/gnd.sym} 230 270 0 1 {name=l4 lab=GND}
C {devices/gnd.sym} 720 360 0 1 {name=l5 lab=GND}
C {devices/gnd.sym} 1220 270 0 0 {name=l6 lab=GND}
C {devices/gnd.sym} 1390 140 0 0 {name=l7 lab=GND}
C {devices/gnd.sym} 660 70 0 1 {name=l8 lab=GND}
C {devices/ammeter.sym} 860 230 0 0 {name=Vinn2
}
C {devices/ammeter.sym} 840 230 0 1 {name=Vinn3
}
C {devices/ammeter.sym} 590 220 0 0 {name=Vinn4
}
C {devices/ammeter.sym} 570 220 0 1 {name=Vinn5
}
